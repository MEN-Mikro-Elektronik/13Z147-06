<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - 13Z147 MDIS Driver - Main Page</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">13Z147 MDIS Driver &nbsp; </h1>
	<h3>Main Page</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; <a class="qindex" href="examples.html">Examples</a> &nbsp; </center>
<hr><h1>13Z147 MDIS Driver Documentation</h1>
<p>
The 13Z147 is a transceiver driver for the MEN_ARINC_717 RX and TX channels (16Z147). The MEN_ARINC_717 is a memory mapped IP-Core, which is used to receive and transmit data over the serial lines. The RX and TX channel can be used independently using RX and TX instance of the driver. Each instance of the RX and TX can be configured independently and has its own interrupt handling. The driver supports 8 different data rates for transmission and reception:<ul>
<li>768 Bits/sec. ( 64 words/sec.)</li><li>1536 Bits/sec. (128 words/sec.)</li><li>3072 Bits/sec. (256 words/sec.)</li><li>6144 Bits/sec. (512 words /sec.)</li><li>12288 Bits/sec. (1024 words/sec.)</li><li>24576 Bits/sec. (2048 words/sec.)</li><li>49152 Bits/sec. (4096 words/sec.)</li><li>98304 Bits/sec. (8192 words/sec.)</li></ul>
<p>
The 13Z147 provides following possibilities to configure:<ul>
<li>Transmit/Receive Data rate</li><li>Transmit/Receive mode Harvard Bi-Phase/Bipolar Return to Zero</li><li>Receive synchronization mode</li></ul>
<p>
/reset<p>
<br>
 <h2><a name="Variants"></a>
Variants</h2>
(no variants)<p>
<br>
 <h2><a name="FuncDescTx"></a>
Functional Description (Transmit)</h2>
<br>
 <h3><a name="General"></a>
General</h3>
The transmit instance of the driver 13Z147 can be configured and used independently. The configuration of the transmit driver must be same as the receiver of the other end, in order to work the communication. The default configuration of the transmit driver is compatible to the default configuration of the receive driver. Any change in the transmit driver suppose to be taken into consideration for the receive driver in order to avoid failure of the communication.<p>
<br>
 <h3><a name="write"></a>
Writing</h3>
The M_setblock writes data from the user provided buffer to the device. The configured data rate needs to be taken into consideration in order to know about user data size. As per the ARINC 717 specification, the data transmission is cyclic. The cyclic transmission is triggered by first data request by the user. Once the transmitter finds synchronization with receiver, it stays in sync by transmitting the same data continuously. When the user transmits new data, it will be first stored internally and transmitted with new frame cycle.<p>
<br>
 <h3><a name="interrupts"></a>
Signals</h3>
A signal is generated by the driver, which was assigned using SetStat Z247_SET_SIGNAL to the application, when a transmission request is completed. The user can uninstall signal using Z247_CLR_SIGNAL.<p>
<br>
 <h3><a name="setget"></a>
Driver Configuration</h3>
The driver can be configured using M_setstat(), using following options:<p>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>Config Parameter</b> </td><td><b>Value</b> </td><td><b>Description</b><p>
</td></tr>
<tr>
<td>Z247_TX_DATA_RATE</td><td>- 0b000</td><td>: 768 Bits/sec. (64 words/sec.)<p>
</td></tr>
<tr>
<td></td><td>- 0b001  </td><td>: 1536Bits/sec. (128 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b010  </td><td>: 3072 Bits/sec. (256 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b011  </td><td>: 6144 Bits/sec. (512 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b100  </td><td>: 12288 Bits/sec. (1024 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b101  </td><td>: 24576 Bits/sec. (2048 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b110  </td><td>: 49152 Bits/sec. (4096 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b111  </td><td>: 98304 Bits/sec. (8192 words/sec.)<p>
</td></tr>
</table>
<p>
<br>
 <h3><a name="default"></a>
Default values</h3>
M_open() and M_close() configures the transmit driver as follows:<p>
<ul>
<li>Transmit Rate: 768 Bits/sec. ( 64 words/sec.)</li><li>Transmit mode: Harvard Bi-Phase</li></ul>
<p>
<br>
 <h2><a name="api_functions"></a>
Supported API Functions of the Transmit Driver</h2>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>API function</b> </td><td><b>Functionality</b> </td><td><b>Corresponding low level function</b><p>
</td></tr>
<tr>
<td>M_open()</td><td>Open device</td><td><a class="el" href="z247__drv_8c.html#a55">Z247_Init()</a><p>
</td></tr>
<tr>
<td>M_close() </td><td>Close device  </td><td><a class="el" href="z247__drv_8c.html#a56">Z247_Exit()</a>) </td></tr>
<tr>
<td>M_setblock() </td><td>Block write from device  </td><td><a class="el" href="z247__drv_8c.html#a62">Z247_BlockWrite()</a> </td></tr>
<tr>
<td>M_setstat() </td><td>Set device parameter  </td><td><a class="el" href="z247__drv_8c.html#a59">Z247_SetStat()</a> </td></tr>
<tr>
<td>M_getstat() </td><td>Get device parameter  </td><td><a class="el" href="z247__drv_8c.html#a60">Z247_GetStat()</a><p>
</td></tr>
</table>
<p>
<br>
 <h2><a name="FuncDescRx"></a>
Functional Description (Receive)</h2>
<br>
 <h3><a name="General"></a>
General</h3>
The receive instance of the driver 13Z147 can be configured and used independently. The configuration of the receive driver must be same as the transmitter of the other end, in order to work the communication. The default configuration of the receive driver is compatible to the default configuration of the transmit driver. Any change in the receive driver suppose to be taken into consideration for the transmit driver in order to avoid failure of the communication.<p>
<br>
 <h3><a name="read"></a>
Reading</h3>
The M_getblock reads data from the driver. The driver receives the data and store it in an internal buffer. When a data is received a signal is generated by the driver, which was assigned using SetStat Z147_SET_SIGNAL to the application. As per the ARINC 717 specification, the data reception is cyclic once the receiver is in sync. The receiver first get synchronized with the transmitter. Once the receiver is in synchronization with transmitter, the data can be received. The user will get received data along with the sync words 0x247 (SUB_FRAME_1), 0x5B8 (SUB_FRAME_2), 0xA47 (SUB_FRAME_3), 0xDB8(SUB_FRAME_4), to identify the subframes.<p>
<br>
 <h3><a name="interrupts"></a>
Signals</h3>
The driver will send the signal which was assigned using SetStat Z147_SET_SIGNAL to the application when a data is received. Uninstall signal using Z147_CLR_SIGNAL.<p>
<br>
 <h3><a name="setget"></a>
Driver Configuration</h3>
The driver can be configured using M_setstat(), using following options:<p>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>Config Parameter</b> </td><td><b> Values </b> </td><td><b>Description</b><p>
</td></tr>
<tr>
<td>Z147_RX_DATA_RATE</td><td>- 0b000</td><td>: 768 Bits/sec. (64 words/sec.)<p>
</td></tr>
<tr>
<td></td><td>- 0b001  </td><td>: 1536Bits/sec. (128 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b010  </td><td>: 3072 Bits/sec. (256 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b011  </td><td>: 6144 Bits/sec. (512 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b100  </td><td>: 12288 Bits/sec. (1024 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b101  </td><td>: 24576 Bits/sec. (2048 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b110  </td><td>: 49152 Bits/sec. (4096 words/sec.) </td></tr>
<tr>
<td></td><td>- 0b111  </td><td>: 98304 Bits/sec. (8192 words/sec.) </td></tr>
<tr>
<td>Z147_RX_SYNC_CFG</td><td>- 0b000</td><td>: No synchronization: Start receiving from the first detected edge  </td></tr>
<tr>
<td></td><td>- 0b001  </td><td>: Part synchronization: Start receiving when only two sync words are in the correct order </td></tr>
<tr>
<td></td><td>- 0b010  </td><td>: Full synchronization: Start receiving when all sync words came in the correct order </td></tr>
<tr>
<td></td><td>- 0b011  </td><td>: Reserved (Full synchronization shall be used)<p>
</td></tr>
</table>
<p>
<br>
 <h3><a name="default"></a>
Default values</h3>
M_open() and M_close() configures the Receive driver as follows:<p>
<ul>
<li>Receive Rate: 768 Bits/sec. ( 64 words/sec.)</li><li>Receive mode: Harvard Bi-Phase</li><li>Receive sync mode: 0b10 = Full synchronization</li></ul>
<p>
<br>
 <h2><a name="api_functions"></a>
Supported API Functions of the Transmit Driver</h2>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>API function</b> </td><td><b>Functionality</b> </td><td><b>Corresponding low level function</b><p>
</td></tr>
<tr>
<td>M_open()</td><td>Open device</td><td><a class="el" href="z147__drv_8c.html#a61">Z147_Init()</a><p>
</td></tr>
<tr>
<td>M_close() </td><td>Close device  </td><td><a class="el" href="z147__drv_8c.html#a62">Z147_Exit()</a>) </td></tr>
<tr>
<td>M_getblock() </td><td>Block read from device  </td><td><a class="el" href="z147__drv_8c.html#a67">Z147_BlockRead()</a><p>
</td></tr>
<tr>
<td>M_setstat() </td><td>Set device parameter  </td><td><a class="el" href="z147__drv_8c.html#a65">Z147_SetStat()</a> </td></tr>
<tr>
<td>M_getstat() </td><td>Get device parameter  </td><td><a class="el" href="z147__drv_8c.html#a66">Z147_GetStat()</a><p>
</td></tr>
</table>
<p>
<br>
 <h2><a name="descriptor_entries"></a>
Descriptor Entries</h2>
(no descriptor entries supported)<p>
<br>
 <h2><a name="codes"></a>
Z147 specific Getstat/Setstat codes</h2>
see <a class="el" href="z147__drv_8h.html#getstat_setstat_codes">section about Getstat/Setstat codes</a><p>
<br>
 <h2><a name="Documents"></a>
Overview of all Documents</h2>
<h3><a name="z147_example"></a>
Simple example for using the driver</h3>
<a class="el" href="z147__example_8c.html">z147_example.c</a> (see example section)
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for 13Z147 MDIS Driver using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2015 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

